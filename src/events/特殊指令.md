# 特殊事件

*名称为非官方命名，请以官方为准*
*大多事件通过分析关卡 JSON 文件得来*

## 无操作指令
类似编程语言中的`// do nothing`或`pass`，会被解析成`## ignore command`。
传入的任何参数都会被忽略，可以当作注释使用。
```
@[#ignore_command] 
```

## 设置事件参数
```
@[set_event_params] {
    
    "target": "物件名称",
    "需要更改的参数": 更改后的参数

}
```

可以设置指定物件的参数。以下是部分参数的列表。

| 属性名（英文） | 中文说明 | 类型 | 示例值 |
|----------------|--------|------|--------|
| `text` | 显示的文字内容 | 字符串 | `"新文字"` |
| `hasBackground` | 是否有背景框 | 布尔值 | `true` / `false` |
| `opacity` | 透明度（0~1） | 数字 | `0.5` |
| `eventTriggerAction` | 触发方式 | 字符串 | 游戏开始后`"auto"` / 玩家调查后`"press"` / 玩家触碰后`"touch"` / 被物件触发`"trigger"` |
| `existCondition` | 触发条件 | 字符串 | `"s:switch_name_触发物件==true"` |
| `isOnTopOfPlayer` | 是否显示在角色上方 | 布尔值 | `true` |

存在的问题：
- 更改字面后物件会移动至背景，修改层级参数无效。
- 无法修改位置，可以用传送器代替。
- 无法修改物件是否可以被推删拆组。

## 添加到组
```
@[add_to_group] {

    "target":"物件名称",
    "group":"cn_text:繁简"

}
```
补充说明：
`"group"`|`string`|`cn_text:`后接着的第一个字是物件字面中要替换的字，第二个字是简体字下的字。

目前只见到了设置繁简的用法。

## 取消物件成句规则
```
@[delete_sentence_rule:property] {

    "target":"物件名称",

}
```

取消特定物件的成句规则，相较于`@[delete_sentence_rule]`，它需要传入的是物件名称。

## 便捷储存物件位置
```
@[save_event_pos:property] {
  
    "target": "物件名称",
    "x": "变量X",
    "y": "变量Y"
  
}
```

用于保存目标物件的位置到指定两个变量。不同于`@[save_event_pos]`，在这里可以指定变量名，而不是变量Id，更为便捷。

## 移动

### 开始移动
```
@[move_route] {

    "target": "物件名称",
    "wait": true

}
```
补充说明：
`"wait"`|`boolean`|是否阻塞式执行。若为`true`，则脚本会暂停，直到移动动作完成。


为指定角色执行一个或多个移动/控制指令，并可选择是否阻塞后续脚本执行。需要与`@[end_move_route]`配合使用。
`@[move_route]`本身不直接执行动作，而是包裹一组移动指令。

### 停止移动
```
@[end_move_route]
```

示例：用黑魔法来让物件`↑↑↓↓←→←→`。

```
@[move_route] {"target": "物件A","wait": true}
@[move_up]
@[move_up]
@[move_down]
@[move_down]
@[move_left]
@[move_right]
@[move_left]
@[move_right]
@[end_move_route]
```

通过这个能让黑魔法编辑移动更为便捷，不需要为每个移动指令都单独指定物件。