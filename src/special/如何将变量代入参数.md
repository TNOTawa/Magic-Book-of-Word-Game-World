# 如何将变量代入参数

> 由 Qwen3 优化了语法和格式，内容已经过验证。

在《文字游戏世界》中，开发者可以通过**变量代入语法**将游戏运行时的动态数据（如变量值、开关状态等）嵌入到事件参数中，从而实现内容的动态化与交互性。本文档详细说明变量与开关的代入方法、适用范围及注意事项。

---

## 1. 基本语法

《文字游戏世界》使用前缀标识符来区分不同类型的动态数据：

- **变量（Variable）**：使用 `v:变量名`  
- **开关（Switch）**：使用 `s:开关名`

这些标识符可直接作为参数值写入事件配置中，引擎将在运行时自动解析并替换为实际值。

> **注意**：变量名与开关名需与项目中定义的名称**完全一致**（包括大小写与空格）。

---

## 2. 应用示例

### 2.1 修改位置参数（`pos`）

假设已定义一个名为 `变量X` 的数值变量，希望打字机事件的 X 坐标动态跟随该变量值：

```json
"pos": [
  "v:变量X",
  0
]
```

此时，打字机文本的水平位置将实时反映 `变量X` 的当前数值。

### 2.2 控制遮挡逻辑（`is_on_top_of_player`）

若希望打字机是否遮挡玩家由名为 `开关Y` 的布尔开关控制：

```json
"is_on_top_of_player": "s:开关Y"
```

当 `开关Y` 为 **开启（true）** 时，打字机文本将显示在角色上方；关闭（false）时则不会遮挡。

### 2.3 动态显示文本内容（`texts`）

**重要限制**：打字机的 `texts` 字段**不支持字符串拼接**。若要显示变量或开关的值，`texts` 必须**完全等于**一个变量或开关的引用，不能包含其他静态文本。

✅ 正确用法：
```json
"texts": "v:变量X"
```
或
```json
"texts": "s:开关Y"
```

❌ 错误用法（不会按预期工作）：
```json
"texts": "当前分数：v:变量X"  // 静态文本 + 变量 → 只显示变量
```

> **替代方案**：如需组合静态文本与动态值，建议使用多个打字事件；或是与固定物件拼接而成。

---

## 相关文档

- [打字机](../events/打字机.md)
- [代数](../events/打字机.md)